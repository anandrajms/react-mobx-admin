!function(e){function t(o){if(r[o])return r[o].exports;var i=r[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t){e.exports=prop-types},function(e,t){e.exports=mobx},function(e,t){e.exports=React},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),i=r(5),n=r(9),a=r(10),s=r(11),u=r(13);r.d(t,"TableStore",function(){return o.a}),r.d(t,"ManipStore",function(){return i.a}),r.d(t,"buildTableHeaders",function(){return n.buildTableHeaders}),r.d(t,"PaginationBase",function(){return a.a}),r.d(t,"DatagridActions",function(){return s.a}),r.d(t,"OptionsField",function(){return u.a})},function(e,t,r){"use strict";function o(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t,r,o,i){var n={};return Object.keys(o).forEach(function(e){n[e]=o[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce(function(r,o){return o(e,t,r)||r},n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}r.d(t,"a",function(){return d});var a,s,u,p,l,c,y=r(1),f=(r.n(y),function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}()),d=(a=function(){function e(t,r,n){i(this,e),o(this,"state",s,this),o(this,"items",u,this),o(this,"totalItems",p,this),o(this,"selection",l,this),this.perPage=15,this.pkName="id",this.perPageOptions=[10,15,20,50,100],o(this,"filters",c,this),this.router=t,this.getEntries=r,this.updateQPars=n;for(var a in t.queryParams)"_"!==a[0]&&this.filters.set(a,t.queryParams[a])}return f(e,[{key:"init",value:function(){return this.setDefaults(),this._refreshList()}},{key:"updatePage",value:function(e){var t=Object.assign({},Object(y.toJS)(this.router.queryParams),{_page:e});this.selection=[],this.updateQPars(t)}},{key:"setPerPage",value:function(e){var t=Object.assign({},Object(y.toJS)(this.router.queryParams),{_page:1,_perPage:e});this.updateQPars(t)}},{key:"updateSort",value:function(e,t){var r=this.router.queryParams,o=r._sortField?r._sortField.split(","):[],i=r._sortDir?r._sortDir.split(","):[],n=o.indexOf(e);n>=0&&t?i[n]=t:n>=0&&null===t?(o.splice(n,1),i.splice(n,1)):(o.push(e),i.push(t));var a=Object.assign({},Object(y.toJS)(this.router.queryParams),{_sortField:o.join(","),_sortDir:i.join(",")});0===o.length&&(delete a._sortField,delete a._sortDir),this.selection=[],this.updateQPars(a)}},{key:"refresh",value:function(){return this._refreshList()}},{key:"updateSelection",value:function(e){this.selection=e}},{key:"toggleIndex",value:function(e){this.selection.remove(e)||this.selection.push(e)}},{key:"selectAll",value:function(){this.selection=this.items.map(function(e,t){return t})}},{key:"isFilterValueChanged",value:function(e){return this.filters.get(e)!==this.router.queryParams[e]}},{key:"isFilterApplied",value:function(e){return e in this.router.queryParams}},{key:"updateFilterValue",value:function(e,t){this.filters.set(e,t)}},{key:"applyFilters",value:function(){var e=Object.assign({},this.filters.toJS(),{_page:1,_perPage:this.router.queryParams._perPage,_sortField:this.router.queryParams._sortField,_sortDir:this.router.queryParams._sortDir});this.updateQPars(e)}},{key:"showFilter",value:function(e){this.filters.set(e,void 0)}},{key:"hideFilter",value:function(e){this.filters.delete(e);var t=Object.assign({},this.filters.toJS(),{_page:this.router.queryParams._page,_perPage:this.router.queryParams._perPage,_sortField:this.router.queryParams._sortField,_sortDir:this.router.queryParams._sortDir});this.updateQPars(t)}},{key:"getRequestParams",value:function(e){return new Promise(function(t,r){return t(e)})}},{key:"setDefaults",value:function(){var e=this.router.queryParams;e._page=e._page?e._page:1,e._perPage=e._perPage?e._perPage:this.perPage,this.defaultSortField&&!e._sortField&&(e._sortField=this.defaultSortField,e._sortDir=this.defaultSortDir)}},{key:"_refreshList",value:function(){var e=this;return this.state="loading",this.getRequestParams(Object(y.toJS)(this.router.queryParams)).then(function(t){return e.getEntries(t)}).then(this.onDataLoaded.bind(this))}},{key:"onDataLoaded",value:function(e){return this.state="ready",this.totalItems=e.totalItems,this.items.replace(e.data),e}},{key:"selected_ids",get:function(){var e=this;return this.selection.map(function(t){return e.items[t][e.pkName]})}},{key:"selectedItems",get:function(){var e=this;return this.selection.map(function(t){return e.items[t]})}},{key:"appliedFilters",get:function(){var e={};for(var t in this.router.queryParams)"_"!==t[0]&&(e[t]=this.router.queryParams[t]);return e}},{key:"areFiltersApplied",get:function(){return JSON.stringify(this.filters)===JSON.stringify(this.appliedFilters)}}]),e}(),s=n(a.prototype,"state",[y.observable],{enumerable:!0,initializer:function(){return"loading"}}),u=n(a.prototype,"items",[y.observable],{enumerable:!0,initializer:function(){return[]}}),p=n(a.prototype,"totalItems",[y.observable],{enumerable:!0,initializer:function(){return 0}}),l=n(a.prototype,"selection",[y.observable],{enumerable:!0,initializer:function(){return[]}}),n(a.prototype,"updatePage",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"updatePage"),a.prototype),n(a.prototype,"setPerPage",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"setPerPage"),a.prototype),n(a.prototype,"updateSort",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"updateSort"),a.prototype),n(a.prototype,"refresh",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"refresh"),a.prototype),n(a.prototype,"selected_ids",[y.computed],Object.getOwnPropertyDescriptor(a.prototype,"selected_ids"),a.prototype),n(a.prototype,"selectedItems",[y.computed],Object.getOwnPropertyDescriptor(a.prototype,"selectedItems"),a.prototype),n(a.prototype,"updateSelection",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"updateSelection"),a.prototype),n(a.prototype,"toggleIndex",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"toggleIndex"),a.prototype),n(a.prototype,"selectAll",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"selectAll"),a.prototype),c=n(a.prototype,"filters",[y.observable],{enumerable:!0,initializer:function(){return new Map}}),n(a.prototype,"appliedFilters",[y.computed],Object.getOwnPropertyDescriptor(a.prototype,"appliedFilters"),a.prototype),n(a.prototype,"areFiltersApplied",[y.computed],Object.getOwnPropertyDescriptor(a.prototype,"areFiltersApplied"),a.prototype),n(a.prototype,"updateFilterValue",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"updateFilterValue"),a.prototype),n(a.prototype,"applyFilters",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"applyFilters"),a.prototype),n(a.prototype,"showFilter",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"showFilter"),a.prototype),n(a.prototype,"hideFilter",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"hideFilter"),a.prototype),n(a.prototype,"onDataLoaded",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"onDataLoaded"),a.prototype),a)},function(e,t,r){"use strict";function o(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t,r,o,i){var n={};return Object.keys(o).forEach(function(e){n[e]=o[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce(function(r,o){return o(e,t,r)||r},n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}r.d(t,"a",function(){return d});var a,s,u,p,l=r(1),c=(r.n(l),r(6)),y=r.n(c),f=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),d=(a=function(){function e(){i(this,e),o(this,"record",s,this),o(this,"errors",u,this),o(this,"state",p,this),this.pkName="id"}return f(e,[{key:"loadEntry",value:function(){throw new Error("implement loadEntry!!")}},{key:"saveEntry",value:function(){throw new Error("implement saveEntry!!")}},{key:"initNew",value:function(){return this.onLoaded({})}},{key:"load",value:function(e){return e?this.loadEntry(e).then(this.onLoaded.bind(this)):this.initNew()}},{key:"reload",value:function(){var e=this.record.get(this.pkName);return this.loadEntry(e).then(this.onLoaded.bind(this))}},{key:"onLoaded",value:function(e){this.origRecord=Object.assign({},e),this.record.replace(e),this.runValidators(),this.state="ready"}},{key:"runValidators",value:function(){var e=this.validators||[];for(var t in e)this.validateField(t,this.record.get(t))}},{key:"validateField",value:function(e,t){if(this.validators&&this.validators[e]){var r=this.validators[e].bind(this),o=r(t,this.errors);!o&&this.errors.has(e)?this.errors.delete(e):o&&this.errors.set(e,o)}}},{key:"isSaveEnabled",value:function(){return 0===this.errors.size&&this.isEntityChanged}},{key:"isBeingCreated",value:function(){return this.record.has(this.pkName)}},{key:"save",value:function(){return this.state="saving",this.saveEntry(this.record.toJS()).then(this.onSaved.bind(this)).catch(this.onError.bind(this))}},{key:"onSaved",value:function(e){return this.origRecord=JSON.parse(JSON.stringify(e)),this.record.clear(),this.record.merge(e),this.state="ready",this.record}},{key:"onError",value:function(e){this.state="ready",this.processError(e)}},{key:"processError",value:function(e){alert(e)}},{key:"updateData",value:function(e,t){t=""===t?null:t,this.record.set(e,t),this.runValidators(),this.onFieldChange&&this.onFieldChange(e,t)}},{key:"isEntityChanged",get:function(){var e=this.record.toJS();return!y()(this.origRecord,e,{strict:!0})}}]),e}(),s=n(a.prototype,"record",[l.observable],{enumerable:!0,initializer:function(){return new Map}}),u=n(a.prototype,"errors",[l.observable],{enumerable:!0,initializer:function(){return new Map}}),p=n(a.prototype,"state",[l.observable],{enumerable:!0,initializer:function(){return"loading"}}),n(a.prototype,"onLoaded",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"onLoaded"),a.prototype),n(a.prototype,"runValidators",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"runValidators"),a.prototype),n(a.prototype,"isEntityChanged",[l.computed],Object.getOwnPropertyDescriptor(a.prototype,"isEntityChanged"),a.prototype),n(a.prototype,"save",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"save"),a.prototype),n(a.prototype,"onSaved",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"onSaved"),a.prototype),n(a.prototype,"onError",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"onError"),a.prototype),n(a.prototype,"updateData",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"updateData"),a.prototype),a)},function(e,t,r){function o(e){return null===e||void 0===e}function i(e){return!(!e||"object"!==(void 0===e?"undefined":a(e))||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}function n(e,t,r){var n,c;if(o(e)||o(t))return!1;if(e.prototype!==t.prototype)return!1;if(p(e))return!!p(t)&&(e=s.call(e),t=s.call(t),l(e,t,r));if(i(e)){if(!i(t))return!1;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}try{var y=u(e),f=u(t)}catch(e){return!1}if(y.length!=f.length)return!1;for(y.sort(),f.sort(),n=y.length-1;n>=0;n--)if(y[n]!=f[n])return!1;for(n=y.length-1;n>=0;n--)if(c=y[n],!l(e[c],t[c],r))return!1;return(void 0===e?"undefined":a(e))===(void 0===t?"undefined":a(t))}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=Array.prototype.slice,u=r(7),p=r(8),l=e.exports=function(e,t,r){return r||(r={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=(void 0===e?"undefined":a(e))&&"object"!=(void 0===t?"undefined":a(t))?r.strict?e===t:e==t:n(e,t,r))}},function(e,t){function r(e){var t=[];for(var r in e)t.push(r);return t}t=e.exports="function"==typeof Object.keys?Object.keys:r,t.shim=r},function(e,t){function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function o(e){return e&&"object"==(void 0===e?"undefined":i(e))&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();t=e.exports=n?r:o,t.supported=r,t.unsupported=o},function(e,t,r){"use strict"},function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.d(t,"a",function(){return f});var a,s,u=r(2),p=r.n(u),l=r(0),c=r.n(l),y=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),f=(s=a=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return n(t,e),y(t,[{key:"onChange",value:function(e){var t=this;return function(){t.props.onChange(e)}}},{key:"range",value:function(e,t,r){var o=[],i=Math.ceil(r/t)||1;return e>2&&o.push("1"),4===e&&o.push("2"),e>4&&o.push("."),e>1&&o.push(e-1),o.push(e),e<i&&o.push(e+1),e===i-3&&o.push(i-1),e<i-3&&o.push("."),e<i-1&&o.push(i),o}}]),t}(p.a.Component),a.propTypes={store:c.a.object.isRequired,onChange:c.a.func.isRequired},s)},function(e,t,r){"use strict";var o=r(0),i=r.n(o),n=r(12),a=(r.n(n),function(e){var t=e.actions,r=e.state;return r.selection.length>0?t(r):null});a.propTypes={actions:i.a.func.isRequired,state:i.a.object.isRequired},t.a=Object(n.observer)(a)},function(e,t){e.exports=mobxReact},function(e,t,r){"use strict";var o=r(2),i=r.n(o),n=r(0),a=r.n(n),s=function(e){var t=e.val,r=(e.attr,e.options),o=e.valueattr,n=e.labelattr,a=e.Component,s=r?r.filter(function(e){return e[o||"value"]===t}):null;if(s&&s.length>0){var u="function"==typeof n?n(s[0]):s[0][n||"label"];return a?i.a.createElement(a,{text:u}):i.a.createElement("span",null,u)}return null};s.propTypes={attr:a.a.any.isRequired,val:a.a.oneOfType([a.a.string,a.a.number]),options:a.a.array.isRequired,labelattr:a.a.oneOfType([a.a.string,a.a.func]),valueattr:a.a.string,Component:a.a.func},t.a=s}]);