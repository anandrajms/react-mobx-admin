!function(t){function e(o){if(r[o])return r[o].exports;var i=r[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e){t.exports=prop-types},function(t,e){t.exports=mobx},function(t,e){t.exports=React},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(4),i=r(5),n=r(9),a=r(10),s=r(11),u=r(13);r.d(e,"TableStore",function(){return o.a}),r.d(e,"ManipStore",function(){return i.a}),r.d(e,"buildTableHeaders",function(){return n.buildTableHeaders}),r.d(e,"PaginationBase",function(){return a.a}),r.d(e,"DatagridActions",function(){return s.a}),r.d(e,"OptionsField",function(){return u.a})},function(t,e,r){"use strict";function o(t,e,r,o){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e,r,o,i){var n={};return Object.keys(o).forEach(function(t){n[t]=o[t]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce(function(r,o){return o(t,e,r)||r},n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}r.d(e,"a",function(){return d});var a,s,u,p,l,c,y=r(1),f=(r.n(y),function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}()),d=(a=function(){function t(e,r,n){i(this,t),o(this,"state",s,this),o(this,"items",u,this),o(this,"totalItems",p,this),o(this,"selection",l,this),this.perPage=15,this.pkName="id",this.perPageOptions=[10,15,20,50,100],o(this,"filters",c,this),this.router=e,this.getEntries=r,this.updateQPars=n;for(var a in e.queryParams)"_"!==a[0]&&this.filters.set(a,e.queryParams[a])}return f(t,[{key:"init",value:function(){return this.setDefaults(),this._refreshList()}},{key:"updatePage",value:function(t){var e=Object.assign({},Object(y.toJS)(this.router.queryParams),{_page:t});this.selection=[],this.updateQPars(e)}},{key:"setPerPage",value:function(t){var e=Object.assign({},Object(y.toJS)(this.router.queryParams),{_page:1,_perPage:t});this.updateQPars(e)}},{key:"updateSort",value:function(t,e){var r=this.router.queryParams,o=r._sortField?r._sortField.split(","):[],i=r._sortDir?r._sortDir.split(","):[],n=o.indexOf(t);n>=0&&e?i[n]=e:n>=0&&null===e?(o.splice(n,1),i.splice(n,1)):(o.push(t),i.push(e));var a=Object.assign({},Object(y.toJS)(this.router.queryParams),{_sortField:o.join(","),_sortDir:i.join(",")});0===o.length&&(delete a._sortField,delete a._sortDir),this.selection=[],this.updateQPars(a)}},{key:"refresh",value:function(){return this._refreshList()}},{key:"updateSelection",value:function(t){this.selection=t}},{key:"toggleIndex",value:function(t){this.selection.remove(t)||this.selection.push(t)}},{key:"selectAll",value:function(){this.selection=this.items.map(function(t,e){return e})}},{key:"isFilterValueChanged",value:function(t){return this.filters.get(t)!==this.router.queryParams[t]}},{key:"isFilterApplied",value:function(t){return t in this.router.queryParams}},{key:"updateFilterValue",value:function(t,e){this.filters.set(t,e)}},{key:"applyFilters",value:function(){var t=Object.assign({},this.filters.toJS(),{_page:1,_perPage:this.router.queryParams._perPage,_sortField:this.router.queryParams._sortField,_sortDir:this.router.queryParams._sortDir});this.updateQPars(t)}},{key:"showFilter",value:function(t){this.filters.set(t,void 0)}},{key:"hideFilter",value:function(t){this.filters.delete(t);var e=Object.assign({},this.filters.toJS(),{_page:this.router.queryParams._page,_perPage:this.router.queryParams._perPage,_sortField:this.router.queryParams._sortField,_sortDir:this.router.queryParams._sortDir});this.updateQPars(e)}},{key:"getRequestParams",value:function(t){return new Promise(function(e,r){return e(t)})}},{key:"setDefaults",value:function(){var t=this.router.queryParams;t._page=t._page?t._page:1,t._perPage=t._perPage?t._perPage:this.perPage,this.defaultSortField&&!t._sortField&&(t._sortField=this.defaultSortField,t._sortDir=this.defaultSortDir)}},{key:"_refreshList",value:function(){var t=this;return this.state="loading",this.getRequestParams(Object(y.toJS)(this.router.queryParams)).then(function(e){return t.getEntries(e)}).then(this.onDataLoaded.bind(this))}},{key:"onDataLoaded",value:function(t){return this.state="ready",this.totalItems=t.totalItems,this.items.replace(t.data),t}},{key:"selected_ids",get:function(){var t=this;return this.selection.map(function(e){return t.items[e][t.pkName]})}},{key:"selectedItems",get:function(){var t=this;return this.selection.map(function(e){return t.items[e]})}},{key:"appliedFilters",get:function(){var t={};for(var e in this.router.queryParams)"_"!==e[0]&&(t[e]=this.router.queryParams[e]);return t}},{key:"areFiltersApplied",get:function(){return JSON.stringify(this.filters)===JSON.stringify(this.appliedFilters)}}]),t}(),s=n(a.prototype,"state",[y.observable],{enumerable:!0,initializer:function(){return"loading"}}),u=n(a.prototype,"items",[y.observable],{enumerable:!0,initializer:function(){return[]}}),p=n(a.prototype,"totalItems",[y.observable],{enumerable:!0,initializer:function(){return 0}}),l=n(a.prototype,"selection",[y.observable],{enumerable:!0,initializer:function(){return[]}}),n(a.prototype,"updatePage",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"updatePage"),a.prototype),n(a.prototype,"setPerPage",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"setPerPage"),a.prototype),n(a.prototype,"updateSort",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"updateSort"),a.prototype),n(a.prototype,"refresh",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"refresh"),a.prototype),n(a.prototype,"selected_ids",[y.computed],Object.getOwnPropertyDescriptor(a.prototype,"selected_ids"),a.prototype),n(a.prototype,"selectedItems",[y.computed],Object.getOwnPropertyDescriptor(a.prototype,"selectedItems"),a.prototype),n(a.prototype,"updateSelection",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"updateSelection"),a.prototype),n(a.prototype,"toggleIndex",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"toggleIndex"),a.prototype),n(a.prototype,"selectAll",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"selectAll"),a.prototype),c=n(a.prototype,"filters",[y.observable],{enumerable:!0,initializer:function(){return new Map}}),n(a.prototype,"appliedFilters",[y.computed],Object.getOwnPropertyDescriptor(a.prototype,"appliedFilters"),a.prototype),n(a.prototype,"areFiltersApplied",[y.computed],Object.getOwnPropertyDescriptor(a.prototype,"areFiltersApplied"),a.prototype),n(a.prototype,"updateFilterValue",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"updateFilterValue"),a.prototype),n(a.prototype,"applyFilters",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"applyFilters"),a.prototype),n(a.prototype,"showFilter",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"showFilter"),a.prototype),n(a.prototype,"hideFilter",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"hideFilter"),a.prototype),n(a.prototype,"onDataLoaded",[y.action],Object.getOwnPropertyDescriptor(a.prototype,"onDataLoaded"),a.prototype),a)},function(t,e,r){"use strict";function o(t,e,r,o){r&&Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e,r,o,i){var n={};return Object.keys(o).forEach(function(t){n[t]=o[t]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce(function(r,o){return o(t,e,r)||r},n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}r.d(e,"a",function(){return d});var a,s,u,p,l=r(1),c=(r.n(l),r(6)),y=r.n(c),f=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),d=(a=function(){function t(e,r){i(this,t),o(this,"record",s,this),o(this,"errors",u,this),o(this,"state",p,this),this.pkName="id",this.loadEntry=e,this.saveEntry=r}return f(t,[{key:"initNew",value:function(){return this.onLoaded({})}},{key:"load",value:function(t){return t?this.loadEntry(t).then(this.onLoaded.bind(this)):this.initNew()}},{key:"reload",value:function(){var t=this.record.get(this.pkName);return this.loadEntry(t).then(this.onLoaded.bind(this))}},{key:"onLoaded",value:function(t){this.origRecord=Object.assign({},t),this.record.replace(t),this.runValidators(),this.state="ready"}},{key:"runValidators",value:function(){var t=this.validators||[];for(var e in t)this.validateField(e,this.record.get(e))}},{key:"validateField",value:function(t,e){if(this.validators&&this.validators[t]){var r=this.validators[t].bind(this),o=r(e,this.errors);!o&&this.errors.has(t)?this.errors.delete(t):o&&this.errors.set(t,o)}}},{key:"isSaveEnabled",value:function(){return 0===this.errors.size&&this.isEntityChanged}},{key:"isBeingCreated",value:function(){return this.record.has(this.pkName)}},{key:"save",value:function(){return this.state="saving",this.saveEntry(this.record.toJS()).then(this.onSaved.bind(this)).catch(this.onError.bind(this))}},{key:"onSaved",value:function(t){return this.origRecord=JSON.parse(JSON.stringify(t)),this.record.clear(),this.record.merge(t),this.state="ready",this.record}},{key:"onError",value:function(t){this.state="ready",this.processError(t)}},{key:"processError",value:function(t){alert(t)}},{key:"updateData",value:function(t,e){e=""===e?null:e,this.record.set(t,e),this.runValidators(),this.onFieldChange&&this.onFieldChange(t,e)}},{key:"isEntityChanged",get:function(){var t=this.record.toJS();return!y()(this.origRecord,t,{strict:!0})}}]),t}(),s=n(a.prototype,"record",[l.observable],{enumerable:!0,initializer:function(){return new Map}}),u=n(a.prototype,"errors",[l.observable],{enumerable:!0,initializer:function(){return new Map}}),p=n(a.prototype,"state",[l.observable],{enumerable:!0,initializer:function(){return"loading"}}),n(a.prototype,"onLoaded",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"onLoaded"),a.prototype),n(a.prototype,"runValidators",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"runValidators"),a.prototype),n(a.prototype,"isEntityChanged",[l.computed],Object.getOwnPropertyDescriptor(a.prototype,"isEntityChanged"),a.prototype),n(a.prototype,"save",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"save"),a.prototype),n(a.prototype,"onSaved",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"onSaved"),a.prototype),n(a.prototype,"onError",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"onError"),a.prototype),n(a.prototype,"updateData",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"updateData"),a.prototype),a)},function(t,e,r){function o(t){return null===t||void 0===t}function i(t){return!(!t||"object"!==(void 0===t?"undefined":a(t))||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}function n(t,e,r){var n,c;if(o(t)||o(e))return!1;if(t.prototype!==e.prototype)return!1;if(p(t))return!!p(e)&&(t=s.call(t),e=s.call(e),l(t,e,r));if(i(t)){if(!i(e))return!1;if(t.length!==e.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}try{var y=u(t),f=u(e)}catch(t){return!1}if(y.length!=f.length)return!1;for(y.sort(),f.sort(),n=y.length-1;n>=0;n--)if(y[n]!=f[n])return!1;for(n=y.length-1;n>=0;n--)if(c=y[n],!l(t[c],e[c],r))return!1;return(void 0===t?"undefined":a(t))===(void 0===e?"undefined":a(e))}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=Array.prototype.slice,u=r(7),p=r(8),l=t.exports=function(t,e,r){return r||(r={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=(void 0===t?"undefined":a(t))&&"object"!=(void 0===e?"undefined":a(e))?r.strict?t===e:t==e:n(t,e,r))}},function(t,e){function r(t){var e=[];for(var r in t)e.push(r);return e}e=t.exports="function"==typeof Object.keys?Object.keys:r,e.shim=r},function(t,e){function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function o(t){return t&&"object"==(void 0===t?"undefined":i(t))&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();e=t.exports=n?r:o,e.supported=r,e.unsupported=o},function(t,e,r){"use strict"},function(t,e,r){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.d(e,"a",function(){return f});var a,s,u=r(2),p=r.n(u),l=r(0),c=r.n(l),y=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),f=(s=a=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return n(e,t),y(e,[{key:"onChange",value:function(t){var e=this;return function(){e.props.onChange(t)}}},{key:"range",value:function(t,e,r){var o=[],i=Math.ceil(r/e)||1;return t>2&&o.push("1"),4===t&&o.push("2"),t>4&&o.push("."),t>1&&o.push(t-1),o.push(t),t<i&&o.push(t+1),t===i-3&&o.push(i-1),t<i-3&&o.push("."),t<i-1&&o.push(i),o}}]),e}(p.a.Component),a.propTypes={store:c.a.object.isRequired,onChange:c.a.func.isRequired},s)},function(t,e,r){"use strict";var o=r(0),i=r.n(o),n=r(12),a=(r.n(n),function(t){var e=t.actions,r=t.state;return r.selection.length>0?e(r):null});a.propTypes={actions:i.a.func.isRequired,state:i.a.object.isRequired},e.a=Object(n.observer)(a)},function(t,e){t.exports=mobxReact},function(t,e,r){"use strict";var o=r(2),i=r.n(o),n=r(0),a=r.n(n),s=function(t){var e=t.val,r=(t.attr,t.options),o=t.valueattr,n=t.labelattr,a=t.Component,s=r?r.filter(function(t){return t[o||"value"]===e}):null;if(s&&s.length>0){var u="function"==typeof n?n(s[0]):s[0][n||"label"];return a?i.a.createElement(a,{text:u}):i.a.createElement("span",null,u)}return null};s.propTypes={attr:a.a.any.isRequired,val:a.a.oneOfType([a.a.string,a.a.number]),options:a.a.array.isRequired,labelattr:a.a.oneOfType([a.a.string,a.a.func]),valueattr:a.a.string,Component:a.a.func},e.a=s}]);